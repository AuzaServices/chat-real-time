<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Pagamento via PIX</title>
    <link rel="stylesheet" href="css/pagamento.css">
    <link rel="icon" href="css/imagens/logo-sem-fundo.png" type="image/png" />
</head>
<body>

    <div class="container">
        <h1>Pagamento via PIX</h1>
        <p>Copie o c√≥digo abaixo e realize o pagamento.</p>

        <label for="pixCode">C√≥digo PIX (Copia e Cola):</label>
        <input type="text" id="pixCode" value="00020126560014BR.GOV.BCB.PIX0121andrielysom@gmail.com0209Plano Top520400005303986540519.995802BR5925ANDRIELYSON DAVID NASCIME6009HORIZONTE62070503***6304441E" readonly>
        <button id="copiarPix" class="copy-button">üìã Copiar</button>

        <p class="pix-value">Valor: <strong>R$19,99</strong></p>

        <button id="confirmar-pagamento-btn">Confirmar Pagamento</button>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const copiarPixBtn = document.getElementById("copiarPix");

  if (copiarPixBtn) {
    copiarPixBtn.addEventListener("click", function () {
      const pixCodeInput = document.getElementById("pixCode");

      if (pixCodeInput) {
        // Seleciona o conte√∫do do input
        pixCodeInput.select();
        pixCodeInput.setSelectionRange(0, pixCodeInput.value.length); // garante sele√ß√£o completa

        // Tenta copiar usando clipboard API
        navigator.clipboard.writeText(pixCodeInput.value).then(() => {
          alert("‚úÖ C√≥digo PIX copiado com sucesso!");
        }).catch(err => {
          console.warn("‚ö†Ô∏è Clipboard API falhou, tentando m√©todo alternativo...");

          // M√©todo alternativo para navegadores que n√£o suportam clipboard API
          try {
            const sucesso = document.execCommand("copy");
            if (sucesso) {
            } else {
              throw new Error("execCommand falhou");
            }
          } catch (erro) {
            console.error("‚ùå Erro ao copiar:", erro);
            alert("‚ùå Erro ao copiar o c√≥digo PIX. Tente manualmente.");
          }
        });
      } else {
        console.error("‚ùå Campo 'pixCode' n√£o encontrado.");
      }
    });
  } else {
    console.error("‚ùå Bot√£o 'copiarPix' n√£o encontrado.");
  }
});
</script>

<script>
  // üî• Cola o c√≥digo aqui
  document.addEventListener("DOMContentLoaded", function () {
    const confirmarPagamentoBtn = document.getElementById("confirmar-pagamento-btn");

    if (confirmarPagamentoBtn) {
      confirmarPagamentoBtn.addEventListener("click", function (e) {
        e.preventDefault();
        console.log("‚úÖ Bot√£o de confirma√ß√£o clicado");

        const urlParams = new URLSearchParams(window.location.search);
        const indicador = urlParams.get("indicador") || "N√£o fui indicado(a)";
        const nome = urlParams.get("nome") || "Nome n√£o informado";
        const sobrenome = urlParams.get("sobrenome") || "";
        const nomeCompleto = sobrenome ? `${nome} ${sobrenome}` : nome;
        const idade = urlParams.get("idade") || "Idade n√£o informada";
        const experiencia = urlParams.get("experiencia") || "Experi√™ncia n√£o informada";
        const estado = urlParams.get("estado") || "Estado n√£o informado";
        const cidade = urlParams.get("cidade") || "Cidade n√£o informada";
        const profissao = urlParams.get("profissao") || "Profiss√£o n√£o informada";
        const whatsappNumero = "5585991340658";

  const mensagem = `\u200E*Quero fazer parte do Time Auza Top!*\n
\u200Eüë§ *Nome:* ${nomeCompleto}
\u200Eüî¢ *Idade:* ${idade}
\u200Eüíº *Profiss√£o:* ${profissao}
\u200Eüìç *Cidade/Estado:* ${cidade} - ${estado}
\u200E‚≠ê *Experi√™ncia:* ${experiencia}
\u200Eüë§ *Indicado por:* ${indicador}
-----------------------------------------------------------
*‚¨áÔ∏è Comprovante de Pagamento ‚¨áÔ∏è*`;

        const linkWhatsApp = `https://wa.me/${whatsappNumero}?text=${encodeURIComponent(mensagem)}`;
        console.log("üîó Redirecionando para:", linkWhatsApp);
        window.location.href = linkWhatsApp;
      });
    } else {
      console.error("‚ùå Bot√£o 'confirmar-pagamento-btn' n√£o encontrado.");
    }
  });
</script>

        <p class="envio-comprovante">
            Ap√≥s realizar o pagamento, clique no bot√£o acima para enviar o <strong>Comprovante</strong>.
        </p>

        <!-- üî• Aqui o indicador aparece! -->
        <p id="indicadorPagamento" class="indicador-info"></p> 

    </div>

    <!-- üî• Logo minimalista adicionada no rodap√© -->
    <div class="footer-container">
        <img src="css/imagens/background.png" alt="Logo Minimalista" class="footer-logo">
    </div>

    <script src="js/pagamento.js"></script>

</body>
</html>